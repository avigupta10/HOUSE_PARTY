(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(12),i=n.n(o),r=(n(87),n(88),n(59)),s=n(9),j=n(138),l=n(101),u=n(151),d=n(103),b=n(31),h=n(3);var O=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(""),r=Object(s.a)(i,2),O=r[0],p=r[1];return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{variant:"h4",component:"h4",children:"Join a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(u.a,{error:O,label:"Code",placeholder:"Enter a RoomCode",value:a,helperText:O,variant:"outlined",onChange:function(e){o(e.target.value)}})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})};fetch("/api/join-room",t).then((function(t){t.ok?e.history.push("/room/".concat(a)):p("Room Not Found")})).catch((function(e){return console.error(e)}))},children:"Enter Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"secondary",to:"/",component:b.b,children:"Back"})})]})},p=n(143),x=n(142),m=n(152),f=n(154),g=n(146),v=n(144),y=n(153);function _(e){var t=Object(c.useState)(e.guest_can_pause),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(e.votes_to_skip),r=Object(s.a)(i,2),O=r[0],_=r[1],C=Object(c.useState)(""),k=Object(s.a)(C,2),S=k[0],T=k[1],P=Object(c.useState)(""),R=Object(s.a)(P,2),E=R[0],J=R[1],q=function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:O,guest_can_pause:a})};fetch("/api/create-room",t).then((function(e){return e.json()})).then((function(t){return e.history.push("/room/"+t.code)}))},w=function(){var t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:O,guest_can_pause:a,code:e.code})};fetch("/api/settings-room",t).then((function(t){t.ok?J("Room Updated Successfully"):T("Error Updating Room"),e.updateCallback()}))};return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(v.a,{in:""!==S||""!==E,children:""!==E?Object(h.jsx)(y.a,{severity:"success",onClose:function(){J("")},children:E}):Object(h.jsx)(y.a,{severity:"danger",onClose:function(){T("")},children:S})})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{component:"h4",variant:"h4",children:e.update?"Settings Room":"Create a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{component:"fieldset",children:[Object(h.jsx)(p.a,{children:Object(h.jsx)("div",{align:"center",children:"Guest Control of Playback State"})}),Object(h.jsxs)(f.a,{row:!0,defaultValue:e.guest_can_pause.toString(),onChange:function(e){o("true"===e.target.value)},children:[Object(h.jsx)(g.a,{value:"true",control:Object(h.jsx)(m.a,{color:"primary"}),label:"Play/Pause",labelPlacement:"bottom"}),Object(h.jsx)(g.a,{value:"false",control:Object(h.jsx)(m.a,{color:"secondary"}),label:"No Control",labelPlacement:"bottom"})]})]})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(u.a,{required:"true",type:"number",defaultValue:e.votes_to_skip,onChange:function(e){_(e.target.value)},inputProps:{min:1,style:{textAlign:"center"}}}),Object(h.jsx)(p.a,{children:Object(h.jsx)("div",{align:"center",children:"Votes Required To Skip Song"})})]})}),e.update?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:w,children:"Update Room"})}):Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:q,children:"Create A Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",to:"/",component:b.b,children:"Back"})})]})]})}_.defaultProps={votes_to_skip:2,guest_can_pause:!0,update:!1,code:null,updateCallback:function(){}};var C=_,k=n(149),S=n(147),T=n(145),P=n(148),R=n(71),E=n.n(R),J=n(70),q=n.n(J),w=n(72),N=n.n(w);var F=function(e){var t=e.time/e.duration*100;return console.log(t),Object(h.jsxs)(S.a,{children:[Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:4,children:Object(h.jsx)("img",{src:e.image_url,height:"100%",width:"100%"})}),Object(h.jsxs)(j.a,{item:!0,xs:8,children:[Object(h.jsx)(l.a,{component:"h5",variant:"h5",children:e.song_title}),Object(h.jsx)(l.a,{color:"textSecondary",component:"h5",variant:"subtitle1",children:e.artist}),Object(h.jsxs)("div",{children:[Object(h.jsx)(T.a,{onClick:function(){e.is_playing?fetch("/spotify/pause-song",{method:"PUT",headers:{"Content-Type":"application/json"}}):fetch("/spotify/play-song",{method:"PUT",headers:{"Content-Type":"application/json"}})},children:e.is_playing?Object(h.jsx)(q.a,{}):Object(h.jsx)(E.a,{})}),Object(h.jsx)(T.a,{onClick:function(){fetch("/spotify/skip-song",{method:"POST",headers:{"Content-Type":"application/json"}})},children:Object(h.jsx)(N.a,{})}),Object(h.jsxs)(l.a,{component:"p",variant:"p",children:["Votes required to skip: ",e.votes," / ",e.votes_required]})]})]})]}),Object(h.jsx)(P.a,{variant:"determinate",value:t})]})};var I=function(e){var t=Object(c.useState)(2),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(!1),r=Object(s.a)(i,2),u=r[0],b=r[1],O=Object(c.useState)(!1),p=Object(s.a)(O,2),x=p[0],m=p[1],f=Object(c.useState)(!1),g=Object(s.a)(f,2),v=g[0],y=g[1],_=Object(c.useState)(!1),S=Object(s.a)(_,2),T=(S[0],S[1]),P=Object(c.useState)({}),R=Object(s.a)(P,2),E=R[0],J=R[1],q=e.match.params.code;Object(c.useEffect)((function(){var e=setInterval(I,1e3);return function(){clearInterval(e)}}),[]);var w=function(){fetch("/api/get-room?code="+q).then((function(t){return t.ok||(e.leaveRoomCallback(),e.history.push("/")),t.json()})).then((function(e){o(e.votes_to_skip),b(e.guest_can_pause),m(e.is_host),x&&N()}))},N=function(){fetch("/spotify/is-authenticated").then((function(e){return e.json()})).then((function(e){T(e.status),console.log(e.status),e.status||fetch("/spotify/get-auth-url").then((function(e){return e.json()})).then((function(e){window.location.replace(e.url)}))}))},I=function(){fetch("/spotify/current-song").then((function(e){return e.ok?e.json():{}})).then((function(e){J(e),console.log(e)}))},U=function(e){y(e)};return w(),v?Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(C,{update:!0,guest_can_pause:u,votes_to_skip:a,code:q,updateCallback:w})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained","aria-label":"settings",onClick:function(){U(!1)},children:"Close"})})]}):Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(l.a,{variant:"h4",component:"h4",children:["Code: ",q]})}),Object(h.jsx)(F,{time:E.time,duration:E.duration,name:E.username,votes:E.votes,votes_required:E.votes_required,song_title:E.title,is_playing:E.is_playing,image_url:E.image_url,artist:E.artist}),x?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained","aria-label":"settings",startIcon:Object(h.jsx)(k.a,{}),onClick:function(){U(!0)},children:"Settings"})}):null,Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){fetch("/api/leave-room",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(t){e.leaveRoomCallback(),e.history.push("/")}))},children:"Leave Room"})})]})},U=n(13),A=n(150);var B=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){fetch("/api/user-in-room").then((function(e){return e.json()})).then((function(e){a(e.code)}))}),[]);var o=function(){a(null)};return Object(h.jsx)(b.a,{children:Object(h.jsxs)(U.d,{children:[Object(h.jsx)(U.b,{exact:!0,path:"/",render:function(){return n?Object(h.jsx)(U.a,{to:"/room/".concat(n)}):Object(h.jsxs)(j.a,{container:!0,spacing:3,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(l.a,{variant:"h3",component:"h3",children:"House Party"})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(A.a,{disableElevation:!0,variant:"contained",color:"primary",children:[Object(h.jsx)(d.a,{color:"primary",to:"/join",component:b.b,children:"Join a Room"}),Object(h.jsx)(d.a,{color:"secondary",to:"/create",component:b.b,children:"Create a Room"})]})})]})}}),Object(h.jsx)(U.b,{path:"/join",component:O}),Object(h.jsx)(U.b,{path:"/create",component:C}),Object(h.jsx)(U.b,{path:"/room/:code",render:function(e){return Object(h.jsx)(I,Object(r.a)(Object(r.a)({},e),{},{leaveRoomCallback:o}))}})]})})};var V=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(B,{})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(V,{})}),document.getElementById("root")),L()},87:function(e,t,n){},88:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.a4fd44c6.chunk.js.map