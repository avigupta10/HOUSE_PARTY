(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(12),i=n.n(o),r=(n(97),n(98),n(33)),s=n(9),j=n(149),l=n(111),u=n(164),d=n(113),b=n(32),h=n(3);var p=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(""),r=Object(s.a)(i,2),p=r[0],O=r[1];return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{variant:"h4",component:"h4",children:"Join a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(u.a,{error:p,label:"Code",placeholder:"Enter a RoomCode",value:a,helperText:p,variant:"outlined",onChange:function(e){o(e.target.value)}})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})};fetch("/api/join-room",t).then((function(t){t.ok?e.history.push("/room/".concat(a)):O("Room Not Found")})).catch((function(e){return console.error(e)}))},children:"Enter Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"secondary",to:"/",component:b.b,children:"Back"})})]})},O=n(155),x=n(153),m=n(166),f=n(168),g=n(158),v=n(156),y=n(167);function C(e){var t=Object(c.useState)(e.guest_can_pause),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(e.votes_to_skip),r=Object(s.a)(i,2),p=r[0],C=r[1],_=Object(c.useState)(""),S=Object(s.a)(_,2),k=S[0],P=S[1],T=Object(c.useState)(""),R=Object(s.a)(T,2),w=R[0],I=R[1],J=function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:p,guest_can_pause:a})};fetch("/api/create-room",t).then((function(e){return e.json()})).then((function(t){return e.history.push("/room/"+t.code)}))},q=function(){var t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:p,guest_can_pause:a,code:e.code})};fetch("/api/settings-room",t).then((function(t){t.ok?I("Room Updated Successfully"):P("Error Updating Room"),e.updateCallback()}))};return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(v.a,{in:""!==k||""!==w,children:""!==w?Object(h.jsx)(y.a,{severity:"success",onClose:function(){I("")},children:w}):Object(h.jsx)(y.a,{severity:"danger",onClose:function(){P("")},children:k})})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{component:"h4",variant:"h4",children:e.update?"Settings Room":"Create a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{component:"fieldset",children:[Object(h.jsx)(O.a,{children:Object(h.jsx)("div",{align:"center",children:"Guest Control of Playback State"})}),Object(h.jsxs)(f.a,{row:!0,defaultValue:e.guest_can_pause.toString(),onChange:function(e){o("true"===e.target.value)},children:[Object(h.jsx)(g.a,{value:"true",control:Object(h.jsx)(m.a,{color:"primary"}),label:"Play/Pause",labelPlacement:"bottom"}),Object(h.jsx)(g.a,{value:"false",control:Object(h.jsx)(m.a,{color:"secondary"}),label:"No Control",labelPlacement:"bottom"})]})]})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(u.a,{required:"true",type:"number",defaultValue:e.votes_to_skip,onChange:function(e){C(e.target.value)},inputProps:{min:1,style:{textAlign:"center"}}}),Object(h.jsx)(O.a,{children:Object(h.jsx)("div",{align:"center",children:"Votes Required To Skip Song"})})]})}),e.update?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:q,children:"Update Room"})}):Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:J,children:"Create A Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",to:"/",component:b.b,children:"Back"})})]})]})}C.defaultProps={votes_to_skip:2,guest_can_pause:!0,update:!1,code:null,updateCallback:function(){}};var _=C,S=n(162),k=n(159),P=n(157),T=n(160),R=n(77),w=n.n(R),I=n(76),J=n.n(I),q=n(78),E=n.n(q);var N=function(e){var t=e.time/e.duration*100;return console.log(t),Object(h.jsxs)(k.a,{children:[Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:4,children:Object(h.jsx)("img",{src:e.image_url,height:"100%",width:"100%"})}),Object(h.jsxs)(j.a,{item:!0,xs:8,children:[Object(h.jsx)(l.a,{component:"h5",variant:"h5",children:e.song_title}),Object(h.jsx)(l.a,{color:"textSecondary",component:"h5",variant:"subtitle1",children:e.artist}),Object(h.jsxs)("div",{children:[Object(h.jsx)(P.a,{onClick:function(){e.is_playing?fetch("/spotify/pause-song",{method:"PUT",headers:{"Content-Type":"application/json"}}):fetch("/spotify/play-song",{method:"PUT",headers:{"Content-Type":"application/json"}})},children:e.is_playing?Object(h.jsx)(J.a,{}):Object(h.jsx)(w.a,{})}),Object(h.jsx)(P.a,{onClick:function(){fetch("/spotify/skip-song",{method:"POST",headers:{"Content-Type":"application/json"}})},children:Object(h.jsx)(E.a,{})}),Object(h.jsxs)(l.a,{component:"p",variant:"p",children:["Votes required to skip: ",e.votes," / ",e.votes_required]})]})]})]}),Object(h.jsx)(T.a,{variant:"determinate",value:t})]})},A=n(65),F=n.n(A),U=n(79),L=n(165),B=n(161);function V(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),j=i[0],l=i[1],d=Object(c.useState)(""),b=Object(s.a)(d,2),p=b[0],O=b[1],x=function(e){var t=e.target.value;t?(O(e.target.value),l(!0),function(e){m.apply(this,arguments)}(t)):(O(t),a([]))};function m(){return(m=Object(U.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/search-song?query=".concat(t)).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){l(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)(L.a,{id:"combo-box-demo",options:n,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},style:{width:300},loading:j,onChange:function(e,t){!function(e){var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uris:e})};fetch("/spotify/play-search",t)}(t.uri),l(!1)},renderInput:function(e){return Object(h.jsx)(u.a,Object(r.a)(Object(r.a)({},e),{},{label:"Search Song",variant:"outlined",onChange:x,value:p,InputProps:Object(r.a)(Object(r.a)({},e.InputProps),{},{endAdornment:Object(h.jsxs)(c.Fragment,{children:[j?Object(h.jsx)(B.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}var H=function(e){var t=Object(c.useState)(2),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(!1),r=Object(s.a)(i,2),u=r[0],b=r[1],p=Object(c.useState)(!1),O=Object(s.a)(p,2),x=O[0],m=O[1],f=Object(c.useState)(!1),g=Object(s.a)(f,2),v=g[0],y=g[1],C=Object(c.useState)(!1),k=Object(s.a)(C,2),P=(k[0],k[1]),T=Object(c.useState)({}),R=Object(s.a)(T,2),w=R[0],I=R[1],J=e.match.params.code;Object(c.useEffect)((function(){var e=setInterval(A,1e3);return function(){clearInterval(e)}}),[]);var q=function(){fetch("/api/get-room?code="+J).then((function(t){return t.ok||(e.leaveRoomCallback(),e.history.push("/")),t.json()})).then((function(e){o(e.votes_to_skip),b(e.guest_can_pause),m(e.is_host),x&&E()}))},E=function(){fetch("/spotify/is-authenticated").then((function(e){return e.json()})).then((function(e){P(e.status),console.log(e.status),e.status||fetch("/spotify/get-auth-url").then((function(e){return e.json()})).then((function(e){window.location.replace(e.url)}))}))},A=function(){fetch("/spotify/current-song").then((function(e){return e.ok?e.json():{}})).then((function(e){I(e),console.log(e)}))},F=function(e){y(e)};return q(),v?Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(_,{update:!0,guest_can_pause:u,votes_to_skip:a,code:J,updateCallback:q})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained","aria-label":"settings",onClick:function(){F(!1)},children:"Close"})})]}):Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"top",children:Object(h.jsxs)(l.a,{variant:"h4",component:"h4",children:["Logged in as ",w.username]})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(V,{})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(l.a,{variant:"h4",component:"h4",children:["Code: ",J]})}),Object(h.jsx)(N,{time:w.time,duration:w.duration,name:w.username,votes:w.votes,votes_required:w.votes_required,song_title:w.title,is_playing:w.is_playing,image_url:w.image_url,artist:w.artist}),x?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained","aria-label":"settings",startIcon:Object(h.jsx)(S.a,{}),onClick:function(){F(!0)},children:"Settings"})}):null,Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){fetch("/api/leave-room",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(t){e.leaveRoomCallback(),e.history.push("/")}))},children:"Leave Room"})})]})},z=n(13),D=n(163);var G=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){fetch("/api/user-in-room").then((function(e){return e.json()})).then((function(e){a(e.code)}))}),[]);var o=function(){a(null)};return Object(h.jsx)(b.a,{children:Object(h.jsxs)(z.d,{children:[Object(h.jsx)(z.b,{exact:!0,path:"/",render:function(){return n?Object(h.jsx)(z.a,{to:"/room/".concat(n)}):Object(h.jsxs)(j.a,{container:!0,spacing:3,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(l.a,{variant:"h3",component:"h3",children:"House Party"})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(D.a,{disableElevation:!0,variant:"contained",color:"primary",children:[Object(h.jsx)(d.a,{color:"primary",to:"/join",component:b.b,children:"Join a Room"}),Object(h.jsx)(d.a,{color:"secondary",to:"/create",component:b.b,children:"Create a Room"})]})})]})}}),Object(h.jsx)(z.b,{path:"/join",component:p}),Object(h.jsx)(z.b,{path:"/create",component:_}),Object(h.jsx)(z.b,{path:"/room/:code",render:function(e){return Object(h.jsx)(H,Object(r.a)(Object(r.a)({},e),{},{leaveRoomCallback:o}))}})]})})};var M=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(G,{})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,169)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(M,{})}),document.getElementById("root")),K()},97:function(e,t,n){},98:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.acc4dfe3.chunk.js.map